# ----------------------------DISPLAY-----------------------------------------
# Terminal settings, index, and titles
set -g default-terminal "screen-256color"
set -g base-index 1                                                    # Start window numbering at 1
setw -g pane-base-index 1                                              # Start pane numbering at 1
set -g set-titles on                                                   # Set terminal title
set -g renumber-windows on                                             # Renumber windows when one closes
setw -g automatic-rename on                                            # Rename windows based on active program
set -g automatic-rename-format "#{pane_current_command}:#{pane_title}" # Window naming format

# Status line settings
set -g status on           # Enable status line
set -g status-interval 5   # Update interval for status line
set -g status-justify left # Left-align windows in status line

# Enhanced OneDark Theme
set -g @plugin 'odedlaz/tmux-onedark-theme' # OneDark theme for consistent UI
set -g @onedark_theme 'true'                # Enable the OneDark theme
# Set date and time formats with colors
set -g @onedark_time_format "#[fg=brightyellow]%I:%M %p" # 12-hour format for time in yellow
set -g @onedark_date_format "#[fg=brightgreen]%d/%m/%Y"  # Date format in green

# Custom Widgets (CPU, Memory, Disk Size, Date, Time, Machine Name, Username) with hexagon-style separators
set -g @onedark_widgets "#[fg=brightred] #(whoami) "

# -----------------------------NAVIGATION-------------------------------------
# Session and window management bindings
bind C-c new-window -c "#{pane_current_path}"                                            # New window in current path
bind S command-prompt -p "Session name:" "new-session -s '%%' -c '#{pane_current_path}'" # Create session with prompt
bind l lock-session                                                                      # Lock session
bind M-r kill-server                                                                     # Restart tmux entirely

# Bind 'prefix + s' to show a detailed list of sessions with expanded window details
bind s choose-tree -w

# Pane navigation and resizing (covered by tmux-pain-control)
bind m resize-pane -Z        # Toggle pane zoom
bind -n M-Right swap-pane -D # Swap with next pane
bind -n M-Left swap-pane -U  # Swap with previous pane

# Split window in current directory
bind - split-window -v -c "#{pane_current_path}" # Vertical split
bind | split-window -h -c "#{pane_current_path}" # Horizontal split

# Window navigation bindings
# Removed duplicate bindings for window switching covered by tmux-sensible.

# ----------------------------- PLUGINS --------------------------------------
# Plugin manager and core plugins
set -g @plugin 'tmux-plugins/tpm'                   # Tmux Plugin Manager (TPM)
set -g @plugin 'tmux-plugins/tmux-sensible'         # Sensible tmux defaults
set -g @plugin 'tmux-plugins/tmux-resurrect'        # Save and restore sessions
set -g @plugin 'tmux-plugins/tmux-continuum'        # Automatic session backup
set -g @plugin 'tmux-plugins/tmux-yank'             # Copy text to system clipboard
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # Highlight prefix key usage
set -g @plugin 'tmux-plugins/tmux-pain-control'     # Enhanced pane management
set -g @plugin 'tmux-plugins/tmux-copycat'          # Enhances search capabilities in tmux, useful for finding patterns quickly.
set -g @plugin 'christoomey/vim-tmux-navigator'     # Vim like navigation

# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# git clone https://github.com/tmux-plugins/tmux-sensible ~/.tmux/plugins/tmux-sensible
# git clone https://github.com/tmux-plugins/tmux-resurrect ~/.tmux/plugins/tmux-resurrect
# git clone https://github.com/tmux-plugins/tmux-continuum ~/.tmux/plugins/tmux-continuum
# git clone https://github.com/tmux-plugins/tmux-yank ~/.tmux/plugins/tmux-yank
# git clone https://github.com/tmux-plugins/tmux-prefix-highlight ~/.tmux/plugins/tmux-prefix-highlight
# git clone https://github.com/tmux-plugins/tmux-pain-control ~/.tmux/plugins/tmux-pain-control
# git clone https://github.com/tmux-plugins/tmux-copycat ~/.tmux/plugins/tmux-copycat
# git clone https://github.com/odedlaz/tmux-onedark-theme ~/.tmux/plugins/tmux-onedark-theme
# git clone https://github.com/christoomey/vim-tmux-navigator ~/.tmux/plugins/vim-tmux-navigator

# Tmux Continuum and Resurrect configuration
set -g @continuum-restore 'on'       # Automatically restore session
set -g @continuum-save-interval '15' # Backup interval (in minutes)

# Tmux Yank configuration
set -g @yank_selection 'clipboard' # Copy selection to system clipboard

# Initialize TPM plugins (keep this at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
